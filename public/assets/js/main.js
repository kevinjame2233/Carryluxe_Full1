document.addEventListener('DOMContentLoaded', ()=>{const heroImages=['/assets/images/hero1.jpg','/assets/images/hero2.jpg','/assets/images/hero3.jpg'];let idx=0;const heroEl=document.querySelector('.hero-img');if(heroEl){heroEl.src=heroImages[0];setInterval(()=>{idx=(idx+1)%heroImages.length;heroEl.src=heroImages[idx];},5000);}const productGrid=document.getElementById('product-grid');async function loadProducts(brand){const url=brand?'/api/products?brand='+encodeURIComponent(brand):'/api/products';const res=await fetch(url);const products=await res.json();productGrid.innerHTML='';products.forEach(p=>{const card=document.createElement('div');card.className='card';card.innerHTML=`<img src="${p.images&&p.images[0]?p.images[0]:'/assets/images/placeholder.jpg'}"><h3>${p.name}</h3><p>$${p.price} • ${p.brand}</p><button class="btn buy" data-id="${p.id}">Buy Now</button>`;productGrid.appendChild(card);});document.querySelectorAll('.buy').forEach(b=>b.addEventListener('click',e=>openOrder(e.target.dataset.id)));}window.loadProducts=loadProducts;loadProducts();document.getElementById('btn-hermes')?.addEventListener('click',()=>loadProducts('Hermès'));document.getElementById('btn-lv')?.addEventListener('click',()=>loadProducts('Louis Vuitton'));const orderModal=document.getElementById('order-modal');const orderForm=document.getElementById('order-form');function openOrder(id){orderModal.classList.remove('hidden');document.getElementById('productId').value=id;}function closeOrder(){orderModal.classList.add('hidden');orderForm.reset();}window.openOrder=openOrder;window.closeOrder=closeOrder;document.getElementById('cancel-order')?.addEventListener('click',closeOrder);orderForm?.addEventListener('submit',async (e)=>{e.preventDefault();const fd=new FormData(orderForm);const payload={name:fd.get('name'),phone:fd.get('phone'),email:fd.get('email'),address:fd.get('address'),productId:fd.get('productId')};const res=await fetch('/api/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const data=await res.json();if(data.success){alert('Order received. We will contact you soon.');closeOrder();}else{alert('Order failed');}});const messages=["Someone from New York just purchased a Louis Vuitton Alma BB","A customer in Los Angeles added a Hermès Birkin 30 to cart","A shopper from Chicago viewed the LV Spring Collection","San Francisco buyer just sent payment for Capucines MM","Someone from Miami just purchased a Hermès Kelly","A customer from Boston is viewing the Hermès Constance","Seattle visitor just added LV Speedy 25 to wishlist","A buyer from Houston completed checkout for Birkin 25","Portland shopper just favorited the Capucines MM","A customer from Atlanta is browsing CarryLuxe Exclusive"];function showPopup(){const txt=messages[Math.floor(Math.random()*messages.length)];const el=document.createElement('div');el.className='popup-message';el.innerText=txt;document.body.appendChild(el);setTimeout(()=>el.classList.add('show'),50);setTimeout(()=>{el.classList.remove('show');setTimeout(()=>el.remove(),600);},6000);}setInterval(showPopup,12000);});